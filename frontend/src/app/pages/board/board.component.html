<div class="container">
  <h3 class="title">boards</h3>
  <app-modal [show]="showModal" [customClass]="'custom_modal_class'">
    <div class="new__dash">
      <h1 class="title">Create a new task in board</h1>
      <form [formGroup]="form" (ngSubmit)="createBoard(form.value)">
        <input
          class="input__modal"
          type="text"
          formControlName="name"
          placeholder="Enter board name..."
        />
        <div class="buttons">
          <button class="button__cancel" (click)="toggleModal('')">
            Cancel
          </button>
          <button class="button__create" [disabled]="!form.valid" type="submit">
            Create
          </button>
        </div>
      </form>
    </div>
  </app-modal>
  <app-button [routerLink]="['/']" name="back"></app-button>
  <div class="kanban__board" cdkDropListGroup>
    <div class="kanban__block">
      <h3 class="title">To Do</h3>
      <div class="add__button" (click)="toggleModal('TODO')">
        <span class="sub__title">add new task</span>
      </div>
      <div class="board" cdkDropList>
        <ng-container *ngFor="let board of todo; let i = index">
          <div class="task" cdkDrag *ngIf="board.status === 'TODO'">
            <input
              #inputName
              class="board__info-title"
              value="{{ board.name }}"
            />
            <button class="button__nav" (click)="deleteBoard(board._id, i)">
              Delete
            </button>
            <button
              class="button__nav"
              (click)="editBoard(board._id, inputName.value)"
            >
              Edit
            </button>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="kanban__block">
      <h3 class="title">In Progress</h3>
      <div class="add__button" (click)="toggleModal('INPROGRESS')">
        <span class="sub__title">add new task</span>
      </div>
      <div class="board" cdkDropList>
        <ng-container *ngFor="let board of progress; let i = index">
          <div cdkDrag class="task" *ngIf="board.status === 'INPROGRESS'">
            <input
              #inputName
              class="board__info-title"
              value="{{ board.name }}"
            />
            <button class="button__nav" (click)="deleteBoard(board._id, i)">
              Delete
            </button>
            <button
              class="button__nav"
              (click)="editBoard(board._id, inputName.value)"
            >
              Edit
            </button>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="kanban__block">
      <h3 class="title">Done</h3>
      <div class="add__button" (click)="toggleModal('DONE')">
        <span class="sub__title">add new task</span>
      </div>
      <div class="board" cdkDropList>
        <ng-container *ngFor="let board of done; let i = index">
          <div
            [ngClass]="{ message: board.archive === true }"
            cdkDrag
            class="task"
            *ngIf="board.status === 'DONE'"
          >
            <input
              #inputName
              class="board__info-title"
              value="{{ board.name }}"
            />
            <button class="button__nav" (click)="deleteBoard(board._id, i)">
              Delete
            </button>
            <button
              class="button__nav"
              (click)="editBoard(board._id, inputName.value)"
            >
              Edit
            </button>
            <button
              class="button__nav"
              (click)="changeArchiveStatus(board._id, board.archive)"
            >
              Archive
            </button>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
