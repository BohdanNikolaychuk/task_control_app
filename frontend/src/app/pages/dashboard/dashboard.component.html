<div class="container">
  <div class="info">
    <h3 class="title">dashboard</h3>
    <div class="filter">
      <input
        [(ngModel)]="Name"
        type="text"
        class="input__modal"
        placeholder="Filter..."
      />

      <select [(ngModel)]="SortByParam">
        <option value="name">By name</option>
        <option value="date">By date</option>
      </select>

      <button (click)="onSortDirection()">
        <p *ngIf="SortDirection === 'asc'">Sorting by ASC</p>
        <p *ngIf="SortDirection === 'desc'">Sorting by DESC</p>
      </button>
    </div>
  </div>
  <app-modal [show]="showModal" [customClass]="'custom_modal_class'">
    <h1 class="title">Create a new dashboard</h1>
    <form [formGroup]="form" (ngSubmit)="createDashBoard(form.value)">
      <input
        class="input__modal"
        type="text"
        placeholder="Enter dashboard name..."
        formControlName="name"
        required
        minlength="2"
      />
      <input
        class="input__modal"
        type="text"
        placeholder="Enter description..."
        formControlName="desc"
        required
        minlength="2"
      />
      <div class="buttons">
        <button class="button__cancel" (click)="toggleModal()">Cancel</button>
        <button type="submit" [disabled]="!form.valid" class="button__create">
          Create
        </button>
      </div>
    </form>
  </app-modal>

  <div class="dashboards">
    <button class="add__dashboard sub__title" (click)="toggleModal()">
      add new dashboard
    </button>

    <div
      class="dashboard"
      *ngFor="
        let dashboard of dashboards
          | filter: Name:'name'
          | sort: [SortByParam, SortDirection];
        let i = index;
        trackBy: trackByFn
      "
    >
      <div class="dashboard__info">
        <input
          #inputName
          class="dashboard__info-title"
          minlength="2"
          placeholder="{{ dashboard.name }}"
        />
        <p class="dashboard__info-text">{{ dashboard.desc }}</p>
        <p class="dashboard__info-text">
          {{ dashboard.createdAt | date: "MM/dd/yyyy hh:mm:ss" }}
        </p>

        <app-button
          (click)="deleteDashBoard(dashboard._id, i)"
          name="delete"
        ></app-button>
        <app-button
          name="Edit"
          (click)="editDashBoards(dashboard._id, inputName.value)"
        ></app-button>

        <app-button
          routerLink="{{ dashboard._id }}/boards"
          name="more info"
        ></app-button>
      </div>
    </div>
  </div>
</div>
